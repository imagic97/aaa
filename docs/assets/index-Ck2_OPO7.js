import{d as _,j as w,k,l as y,o as d,m as h,n as u,t as m,F as p,p as E,f as g}from"./vendor-others-Cn62k0lQ.js";class v{_fakeEl=null;constructor(){this._fakeEl=null}copy(t){return new Promise((e,r)=>{this._removeFake(),this._addFake(t);const i=this._doCopy();this._removeFake(),i?e():r(new Error(`您的浏览器不支持一键复制，请手动复制：
${t}`))})}_addFake(t){const e=window.document.documentElement.getAttribute("dir")==="rtl";this._fakeEl=window.document.createElement("textarea"),this._fakeEl.style.position="absolute",this._fakeEl.style[e?"right":"left"]="-9999px",this._fakeEl.style.top=`${window.pageYOffset||window.document.documentElement.scrollTop}px`,this._fakeEl.setAttribute("readonly",""),this._fakeEl.value=t,window.document.body.appendChild(this._fakeEl),this._fakeEl.select(),this._fakeEl.setSelectionRange(0,this._fakeEl.value.length)}_removeFake(){this._fakeEl!==null&&(window.document.body.removeChild(this._fakeEl),this._fakeEl.remove(),this._fakeEl=null)}_doCopy(){try{return window.document.execCommand("copy")}catch{return!1}}copyImage(t){return Promise.resolve().then(()=>{if(!navigator.clipboard)throw new Error("您的浏览器暂不支持复制图像");return new Promise((e,r)=>{if(t.type==="image/png")return e(t);try{var i=document.createElement("canvas");let n=new Image;n.setAttribute("crossOrigin","Anonymous"),n.src=window.URL.createObjectURL(t);let o=i.getContext("2d");o||r("创建 Canvas 失败"),n.onload=()=>{i.width=n.width,i.height=n.height,o.drawImage(n,0,0),i.toBlob(s=>{s?e(s):r("转换失败")},"image/png")}}catch(n){r(n)}}).then(e=>{const r=new ClipboardItem({[e.type]:e});return navigator.clipboard.write([r])})})}}const b=new v,C=["onClick"],F=_({__name:"index",setup(f){const t=g(),e=w(),r=k(()=>e.value?e.value.ipAddress.split(/\s+/):[]),i=({username:o,repo:s,issueNumber:l})=>{const c=`https://api.github.com/repos/${o}/${s}/issues/${l}`;fetch(c).then(a=>{if(!a.ok)throw new Error("Error!");return a.json()}).then(a=>{e.value=JSON.parse(a.body)}).catch(a=>{console.error(a)})},n=o=>{b.copy(o)};return y(()=>{let o=3;t.query&&typeof t.query.issue=="string"&&(o=parseInt(t.query.issue),isNaN(o)&&(o=3));let s=window.location.href.match(/https:\/\/([^\/]+)\.github\.io\/([^\/]+)\/#/);s&&i({repo:s[2],username:s[1],issueNumber:o})}),(o,s)=>(d(),h(p,null,[u("h4",null,"time: "+m(e.value?.timestamp),1),(d(!0),h(p,null,E(r.value,(l,c)=>(d(),h("div",null,[u("label",null,"ipv6_"+m(c+1)+": ",1),u("span",null,"["+m(l)+"]",1),u("button",{onClick:a=>n(l)},"copy",8,C)]))),256))],64))}});export{F as default};
